#!/usr/bin/env bash
# mise description: Watch and rebuild on changes (full dev workflow)

set -euo pipefail

PROJECT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"

# Run full dev workflow: setup vault, build, symlink, then watch
echo "ðŸ”§ Kanban Bases View - Development Mode"
echo ""

# Setup vault
bash "$PROJECT_DIR/tools/dev.sh"

# Build
echo "Building..."
npm run build

# Symlink
bash "$PROJECT_DIR/tools/symlink.sh"

echo ""
echo "Setup complete. Starting watch mode..."
echo ""

# Watch for changes
bash "$PROJECT_DIR/tools/watch.sh"
